/*!
* comment
* v 3.0.0
* svn ../ui/project/comment3/
* 2015-08-12 11:48
* [${p_id},${t_id},${d_id}] published at ${publishdate} ${publishtime}
*/
!function(exports){var UNDEFINED="undefined",doc=document,ua=function(){var a=navigator.userAgent.toLowerCase(),b={};return b.isIE=/msie/.test(a),b.isOPERA=/opera/.test(a),b.isMOZ=/gecko/.test(a),b.isIE6=/msie 6/.test(a),b.isIE7=/msie 7/.test(a),b.isSAFARI=/safari/.test(a),b.iswinXP=/windows nt 5.1/.test(a),b.iswinVista=/windows nt 6.0/.test(a),b.isFF=/firefox/.test(a),b.isIOS=/\((iPhone|iPad|iPod)/i.test(a),b}(),create=function(a){return a=a.toUpperCase(),"TEXT"==a?doc.createTextNode(""):"BUFFER"==a?doc.createDocumentFragment():doc.createElement(a)},byId=function(a){return"string"==typeof a?doc.getElementById(a):a},byTag=function(a){return"string"==typeof a?doc.getElementsByTagName(a):a},byAttr=function(a,b,c){"string"==typeof a&&(a=byId(a));var d=[];c=c||"";for(var e=function(a){return a.getAttribute(b)},f=0,g=a.childNodes.length;g>f;f++)if(1==a.childNodes[f].nodeType){var h=!1;h=c?e(a.childNodes[f])==c:!!e(a.childNodes[f]),h&&d.push(a.childNodes[f]),a.childNodes[f].childNodes.length>0&&(d=d.concat(arguments.callee.call(null,a.childNodes[f],b,c)))}return d},encodeDoubleByte=function(a){return"string"!=typeof a?a:encodeURIComponent(a)},builder=function(a,b){var c,d,e;a=function(){return"string"==typeof a?byId(a):a}(),d=byAttr(a,b),c={},e={};for(var f=0,g=d.length;g>f;f++){var h=d[f].getAttribute(b);h&&(c[h]||(c[h]=[]),c[h].push(d[f]),e[h]||(e[h]=d[f]))}return e.wrap=a,{box:a,list:c,ids:e}},hasClass=function(a,b){return a?a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)")):!1},addClass=function(a,b){hasClass(a,b)||(a.className=a.className.replace(/(^\s*)|(\s*$)/g,"")+" "+b)},removeClass=function(a,b){if(hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},getParam=function(a){var b=window.location.search.match(new RegExp("(\\?|&)"+a+"=([^&]*)(&|$)"));return null!=b?decodeURIComponent(b[2]):null},jsLoad=function(a,b){var c=byTag("head")[0],d=create("script"),e=!1;d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(e=!0,d.onload=d.onreadystatechange=null,"function"==typeof b&&b())},d.src=a;try{c.appendChild(d)}catch(f){}},addEvent=function(a,b,c,d){var e=byId(a);if(null==e)throw new Error("addEvent \u627E\u4E0D\u5230\u5BF9\u8C61\uFF1A"+a);return typeof d==UNDEFINED&&(d=!1),typeof b==UNDEFINED&&(b="click"),e.addEventListener?(e.addEventListener(b,c,d),!0):e.attachEvent?(e.attachEvent("on"+b,c),!0):void(e["on"+b]=c)},removeEvent=function(a,b,c){var d=byId(a);if(null==d)throw"removeEvent \u627E\u4E0D\u5230\u5BF9\u8C61\uFF1A"+a;"function"==typeof c&&(typeof b==UNDEFINED&&(b="click"),d.addEventListener?d.removeEventListener(b,c,!1):d.attachEvent&&d.detachEvent("on"+b,c),c[b]=null)},bind2=function(){return Function.prototype.bind2=function(a){var b=this;return function(){return b.apply(a,arguments)}},function(a,b){var c=a;return function(){return c.apply(b,arguments)}}}(),Url=function(){return Url=function(a){a=a||"",this.url=a,this.query={},this.parse()},Url.prototype={parse:function(a){a&&(this.url=a),this.parseAnchor(),this.parseParam()},parseAnchor:function(){var a=this.url.match(/\#(.*)/);a=a?a[1]:null,this._anchor=a,null!=a&&(this.anchor=this.getNameValuePair(a),this.url=this.url.replace(/\#.*/,""))},parseParam:function(){var a=this.url.match(/\?([^\?]*)/);a=a?a[1]:null,null!=a&&(this.url=this.url.replace(/\?([^\?]*)/,""),this.query=this.getNameValuePair(a))},getNameValuePair:function(a){var b={};return a.replace(/([^&=]*)(?:\=([^&]*))?/gim,function(a,c,d){""!==c&&(b[c]=d||"")}),b},getParam:function(a){return this.query[a]||""},clearParam:function(){this.query={}},setParam:function(a,b){if(null==a||""===a||"string"!=typeof a)throw new Error("no param name set");this.query=this.query||{},this.query[a]=b},setParams:function(a){this.query=a},serialize:function(a){var b=[];for(var c in a)null==a[c]||""===a[c]?b.push(c+"="):b.push(c+"="+a[c]);return b.join("&")},toString:function(){var a=this.serialize(this.query);return this.url+(a.length>0?"?"+a:"")+(this.anchor?"#"+this.serialize(this.anchor):"")},getHashStr:function(a){return this.anchor?"#"+this.serialize(this.anchor):a?"#":""}},Url}(),ijax=function(){return{arrTaskLists:[],createLoadingIframe:function(){if(null!=this.loadFrames)return!1;var a="loadingIframe_thread"+Math.ceil(1e4*Math.random()),b="loadingIframe_thread"+Math.ceil(1e4*(Math.random()+1));this.loadFrames=[a,b];var c="";ua.isIE6&&(c='javascript:void((function(){document.open();document.domain="sina.com.cn";document.close()})())');var d='<iframe id="'+a+'" name="'+a+'" class="invisible" scrolling="no" src="" allowTransparency="true" style="display:none;" frameborder="0" ></iframe><iframe id="'+b+'" name="'+b+'" class="invisible" scrolling="no" src="'+c+'" allowTransparency="true" style="display:none;" frameborder="0" ></iframe>',e=create("div");e.id="ijax_iframes",e.innerHTML=d,doc.body.appendChild(e);var f=setInterval(bind2(function(){null!=byId(this.loadFrames[0])&&null!=byId(this.loadFrames[1])&&(clearInterval(f),f=null,this.loadingIframe={thread1:{container:byId(this.loadFrames[0]),isBusy:!1},thread2:{container:byId(this.loadFrames[1]),isBusy:!1}},this.loadByList())},this),10)},isIjaxReady:function(){if(typeof this.loadingIframe==UNDEFINED)return!1;for(var a in this.loadingIframe)if(!this.loadingIframe[a].isBusy)return this.loadingIframe[a].isBusy=!0,this.loadingIframe[a];return!1},request:function(a,b){var c={};c.url=a,c.option=b||{},this.arrTaskLists.push(c),null==this.loadFrames?this.createLoadingIframe():this.loadByList()},loadByList:function(){if(0===this.arrTaskLists.length)return!1;var a=this.isIjaxReady();if(!a)return!1;var b=this.arrTaskLists[0];this.loadData(b.url,b.option,a),this.arrTaskLists.shift()},loadData:function(a,b,c){var d=new Url(a);if(b.GET)for(var e in b.GET)d.setParam(e,encodeDoubleByte(b.GET[e]));d=d.toString();var f=c.container;if(f.listener=bind2(function(){if(b.onComplete||b.onException)try{var a,e=f.contentWindow.document,g=byTag("textarea")[0];a=typeof g!=UNDEFINED?g.value:e.body.innerHTML,b.onComplete?b.onComplete(a):b.onException()}catch(h){b.onException&&b.onException(h.message,d.toString())}c.isBusy=!1,removeEvent(f,"load",f.listener),this.loadByList()},this),addEvent(f,"load",f.listener),b.POST){var g=create("form");g.id="IjaxForm",g.action=d,g.method="post",g.target=f.id;for(var h in b.POST){var i=create("input");i.type="hidden",i.name=h,i.value=b.POST[h],g.appendChild(i)}doc.body.appendChild(g);try{g.submit()}catch(j){}}else try{window.frames(f.id).location.href=d}catch(j){f.src=d}}}}(),trim=function(a){return a.replace(/(^[\s\u3000]*)|([\s\u3000]*$)/g,"")},isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},queryToJson=function(a,b){for(var c,d,e,f=trim(a).split("&"),g={},h=function(a){return b?decodeURIComponent(a):a},i=0,j=f.length;j>i;i++)f[i]&&(c=f[i].split("="),e=c[0],d=c[1],c.length<2&&(d=e,e="$nullName"),g[e]?(isArray(g[e])!==!0&&(g[e]=[g[e]]),g[e].push(h(d))):g[e]=h(d));return g},timeoutHandle=function(){var a=[],b={success:function(b){var c=a[b];c&&(c.isSuccess=!0,clearTimeout(c.timer))},timeout:function(b,c){var d=a[b];d&&(d.timer=setTimeout(function(){d.isSuccess||"function"==typeof c&&c.call(this)},d.time))}};return function(c,d,e){if(a[c])throw new Error(c+"\u5DF2\u7ECF\u88AB\u5360\u7528");a[c]={},a[c].time=e||5e3,a[c].isSuccess=!1,"function"==typeof d&&d.call(this,b)}}(),faceFilter=function(){var a="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/",b={"\u56FD\u65D7":"dc/flag_thumb","\u8D70\u4F60":"ed/zouni_thumb","\u7B11\u54C8\u54C8":"32/lxhwahaha_thumb","\u6C5F\u5357style":"67/gangnamstyle_thumb","\u5410\u8840":"8c/lxhtuxue_thumb","\u597D\u6FC0\u52A8":"ae/lxhjidong_thumb","lt\u5207\u514B\u95F9":"73/ltqiekenao_thumb","moc\u8F6C\u53D1":"cb/moczhuanfa_thumb","ala\u8E66":"b7/alabeng_thumb","gst\u8010\u4F60":"1b/gstnaini_thumb","xb\u538B\u529B":"e0/xbyali_thumb","din\u63A8\u649E":"dd/dintuizhuang_thumb","\u8349\u6CE5\u9A6C":"7a/shenshou_thumb","\u795E\u9A6C":"60/horse2_thumb","\u6D6E\u4E91":"bc/fuyun_thumb","\u7ED9\u529B":"c9/geili_thumb","\u56F4\u89C2":"f2/wg_thumb","\u5A01\u6B66":"70/vw_thumb","\u718A\u732B":"6e/panda_thumb","\u5154\u5B50":"81/rabbit_thumb","\u5965\u7279\u66FC":"bc/otm_thumb","\u56E7":"15/j_thumb","\u4E92\u7C89":"89/hufen_thumb","\u793C\u7269":"c4/liwu_thumb","\u5475\u5475":"ac/smilea_thumb","\u563B\u563B":"0b/tootha_thumb","\u54C8\u54C8":"6a/laugh","\u53EF\u7231":"14/tza_thumb","\u53EF\u601C":"af/kl_thumb","\u6316\u9F3B\u5C4E":"a0/kbsa_thumb","\u5403\u60CA":"f4/cj_thumb","\u5BB3\u7F9E":"6e/shamea_thumb","\u6324\u773C":"c3/zy_thumb","\u95ED\u5634":"29/bz_thumb","\u9119\u89C6":"71/bs2_thumb","\u7231\u4F60":"6d/lovea_thumb","\u6CEA":"9d/sada_thumb","\u5077\u7B11":"19/heia_thumb","\u4EB2\u4EB2":"8f/qq_thumb","\u751F\u75C5":"b6/sb_thumb","\u592A\u5F00\u5FC3":"58/mb_thumb","\u61D2\u5F97\u7406\u4F60":"17/ldln_thumb","\u53F3\u54FC\u54FC":"98/yhh_thumb","\u5DE6\u54FC\u54FC":"6d/zhh_thumb","\u5618":"a6/x_thumb","\u8870":"af/cry","\u59D4\u5C48":"73/wq_thumb","\u5410":"9e/t_thumb","\u6253\u54C8\u6B20":"f3/k_thumb","\u62B1\u62B1":"27/bba_thumb","\u6012":"7c/angrya_thumb","\u7591\u95EE":"5c/yw_thumb","\u998B\u5634":"a5/cza_thumb","\u62DC\u62DC":"70/88_thumb","\u601D\u8003":"e9/sk_thumb","\u6C57":"24/sweata_thumb","\u56F0":"7f/sleepya_thumb","\u7761\u89C9":"6b/sleepa_thumb","\u94B1":"90/money_thumb","\u5931\u671B":"0c/sw_thumb","\u9177":"40/cool_thumb","\u82B1\u5FC3":"8c/hsa_thumb","\u54FC":"49/hatea_thumb","\u9F13\u638C":"36/gza_thumb","\u6655":"d9/dizzya_thumb","\u60B2\u4F24":"1a/bs_thumb","\u6293\u72C2":"62/crazya_thumb","\u9ED1\u7EBF":"91/h_thumb","\u9634\u9669":"6d/yx_thumb","\u6012\u9A82":"89/nm_thumb","\u5FC3":"40/hearta_thumb","\u4F24\u5FC3":"ea/unheart","\u732A\u5934":"58/pig",ok:"d6/ok_thumb","\u8036":"d9/ye_thumb",good:"d8/good_thumb","\u4E0D\u8981":"c7/no_thumb","\u8D5E":"d0/z2_thumb","\u6765":"40/come_thumb","\u5F31":"d8/sad_thumb","\u8721\u70DB":"91/lazu_thumb","\u86CB\u7CD5":"6a/cake","\u949F":"d3/clock_thumb","\u8BDD\u7B52":"1b/m_thumb"},c=/\[(.*?)\]/g;return function(d){return d=d||"",d=d.replace(c,function(c,d){var e=b[d];return e&&(e=a+e+".gif"),e?'<img class="face" title="'+d+'" alt="'+d+'" src="'+e+'" />':d})}}(),encodeHTML=function(a){var b="";return"string"!=typeof a?a:0===a.length?"":(b=a.replace(/&/g,"&gt;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/ /g,"&nbsp;"),b=b.replace(/\'/g,"'"),b=b.replace(/\"/g,"&quot;"),b=b.replace(/\n/g,"<br>"))},decodeHTML=function(a){var b="";return"string"!=typeof a?a:0===a.length?"":(b=a.replace(/&gt;/g,"&"),b=b.replace(/&lt;/g,"<"),b=b.replace(/&gt;/g,">"),b=b.replace(/&nbsp;/g," "),b=b.replace(/'/g,"'"),b=b.replace(/&quot;/g,'"'),b=b.replace(/<br>/g,"\n"))},cmntEncodeHtml=function(a){return encodeHTML(decodeHTML(a))},post=function(url,param,cb,timeoutCb,time){var cbName="iJax"+Date.parse(new Date);try{doc.domain="sina.com.cn"}catch(e){}param.callback=cbName;var TIMEOUT_NAME="TD_"+(new Date).getTime();timeoutHandle(TIMEOUT_NAME,function(handle){handle.timeout(TIMEOUT_NAME,function(){"function"==typeof timeoutCb&&timeoutCb()}),window[cbName]=function(m){"string"==typeof m&&(m=eval("("+m+")")),"function"==typeof cb&&cb(m),handle.success(TIMEOUT_NAME)},ijax.request(url,{POST:param})},time||5e3)},byteLength=function(a){if(typeof a==UNDEFINED)return 0;var b=a.match(/[^\x00-\x80]/g);return a.length+(b?b.length:0)},placeholder=function(){var a="placeholder"in create("input");return function(b){function c(b){if(!a){var c=b.getAttribute("hasPlaceholder")||0;if("1"!==c){var d=function(){""===b.value&&(addClass(b,"gray"),b.value=f),b.onfocus=function(){(""===b.value||b.value===f)&&(this.value="",removeClass(b,"gray"))},b.onblur=function(){""===b.value&&(this.value=f,addClass(b,"gray"))}},e=function(){var a=create("input");a.type="text",a.className="pwd_placeholder gray "+b.className,a.value=f,a.autocomplete="off",b.style.display="none",b.parentNode.appendChild(a),a.onfocus=function(){a.style.display="none",b.style.display="",b.focus()},b.onblur=function(){""===b.value&&(a.style.display="",b.style.display="none")}},f=b.getAttribute("placeholder");f||b.attributes&&b.attributes.placeholder&&(f=b.attributes.placeholder.value);var g=b.tagName;if("INPUT"==g){var h=b.type;"password"==h&&f?e():"text"==h&&f&&d()}else"TEXTAREA"==g&&d();b.setAttribute("hasPlaceholder","1")}}}for(var d=b.length-1;d>=0;d--){var e=b[d];c(e)}}}(),getMsg=function(a,b){if(!a)return void(b.msg.innerHTML='<p class="tip tip-error">\u8BF7\u6307\u5B9A\u4E3E\u62A5\u5185\u5BB9mid!</p>');var c=function(a){if(typeof a.config==UNDEFINED)return"";var b=a.config.match(/wb_screen_name=([^&]*)/i);return b?b[1]:""},d=function(a){if(typeof a.config==UNDEFINED)return"";var b="",c=queryToJson(a.config),d=c.wb_verified,e=c.wb_verified_type;return typeof d!=UNDEFINED&&"1"==d&&(b="0"==e?"y":"b"),b},e=function(a){var b="",e=d(a),f="\u65B0\u6D6A\u4E2A\u4EBA\u8BA4\u8BC1",g='<span class="name">',h="</span>";e&&("b"==e&&(f="\u65B0\u6D6A\u673A\u6784\u8BA4\u8BC1"),b='<img src="http://www.sinaimg.cn/dy/deco/2013/0608/v'+e+'.png" title="'+f+'" style="vertical-align: middle;" />');var i=c(a),j="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid=",k="";return k=i?'<a target="_blank" href="http://weibo.com/u/'+a.uid+'" title="'+i+'">'+i+b+"</a>":a.uid&&"0"!=a.uid?'<a target="_blank" href="'+j+a.uid+'" title="'+a.nick+'">'+a.nick+"</a>":a.nick,g+k+h},f=function(a){var b="http://weibo.com/u/",d=a.config||"",e=queryToJson(d,!0).wb_profile_img||"http://www.sinaimg.cn/dy/deco/2012/1018/sina_comment_defaultface.png",f=c(a),g="http://comment5.news.sina.com.cn/comment/skin/default.html?info_type=1&style=1&user_uid=";return f?'<a href="'+b+a.uid+'" title="'+f+'" target="_blank"><img src="'+e+'"/></a>':a.uid&&"0"!=a.uid?'<a target="_blank" href="'+g+a.uid+'" title="'+a.nick+'"><img src="'+e+'"/></a>':'<img src="'+e+'"/>'},g=function(a){if(!a.content)return void(b.msg.innerHTML='<p class="tip tip-error">\u6CA1\u6709\u4E3E\u62A5\u5185\u5BB9!</p>');var c=f(a),d=e(a),g=faceFilter(cmntEncodeHtml(a.content)),h=a.area?"["+a.area+"]":"&nbsp;",i=a.news_info?'<p class="lnk"><a target="_blank" href="'+a.news_info.url+'" title="'+a.news_info.title+'">\u300A'+a.news_info.title+"\u300B</a></p>":"",j=" class=",k=["<!-- \u5934\u50CF start -->","<div"+j+'"head">'+c+"</div>","<!-- \u5934\u50CF end -->","<!-- \u5185\u5BB9 start -->","<div"+j+'"cont">',"<div"+j+'"info">',d,"</span>","<span"+j+'"area">'+h+"</span>",i,"</div>","<div"+j+'"txt">',g,"</div>","</div>","<!-- \u5185\u5BB9 end -->"].join("");b.msg.innerHTML='<div class="item clearfix">'+k+"</div>",b.msg.setAttribute("hasContent","1")},h=5e3,i="TD_"+(new Date).getTime(),j="http://comment5.news.sina.com.cn/cmnt/info?format=js&compress=1&ie=gbk&oe=gbk&mid="+a+"&jsvar="+i;timeoutHandle(i,function(b){b.timeout(i,function(){}),jsLoad(j,function(){var c,d,e;b.success(i);var f=exports[i];if(typeof f!=UNDEFINED){if(0!==f.result.status.code||typeof f.result.error!=UNDEFINED)throw e=f.result.status.msg,new Error("\u6570\u636E\u52A0\u8F7D\u51FA\u9519\uFF1A"+e+";URL:"+j);d=f.result,c=d.cmntlist[a],g(c)}})},h)},postTip=function(){var a=null;return{show:function(b,c,d){var e=this;clearTimeout(a),dom.postTip.innerHTML='<p class="post-tip post-tip-'+b+'">'+c+"</p>",dom.postTip.style.visibility="visible",d&&setTimeout(function(){e.hide()},d)},hide:function(){dom.postTip.style.visibility="hidden"}}}(),report=function(){var a=!1;return function(b){if(a)return void postTip.show("error","\u6B64\u5185\u5BB9\u60A8\u5DF2\u7ECF\u4E3E\u62A5\u8FC7\uFF0C\u8C22\u8C22\uFF01",5e3);var c="http://comment5.news.sina.com.cn/cmnt/submit",d={channel:"feedback",newsid:"1",parent:"",content:b,format:"json",ie:"gbk",oe:"gbk",ispost:0,share_url:"",video_url:"",img_url:"",iframe:1};post(c,d,function(b){postTip.show("success","\u63D0\u4EA4\u6210\u529F\uFF0C\u6211\u4EEC\u4F1A\u53CA\u65F6\u5904\u7406\u60A8\u7684\u4E3E\u62A5\uFF0C\u8C22\u8C22\uFF01",5e3),a=!0},function(){postTip.show("error","\u63D0\u4EA4\u8D85\u65F6\uFF0C\u8BF7\u7A0D\u5019\u518D\u8BD5\uFF01",5e3)})}}(),bind=function(a,b){addEvent(b.submit,"click",function(){var c=b.msg.getAttribute("hasContent");if(!a||!c)return void postTip.show("error","\u6CA1\u6709\u9700\u8981\u4E3E\u62A5\u7684\u5185\u5BB9\uFF01",5e3);var d=exports.SINA_USER_PANEL,e=exports.SINA_OUTLOGIN_LAYER;if(e.isLogin()){for(var f=document.getElementsByName("reportType"),g=0,h=0,i=f.length;i>h;h++){var j=f[h];j.checked&&(g=j.value)}var k=b.cont,l=k.getAttribute("placeholder");l||k.attributes&&k.attributes.placeholder&&(l=k.attributes.placeholder.value);var m=trim(k.value);if(m===l&&(m=""),m="mid="+a+"&type="+g+"&content="+m,byteLength(m)>6e3)return void postTip.show("error","\u60A8\u63D0\u4EA4\u7684\u5185\u5BB9\u592A\u591A\u4E86\uFF0C\u5DF2\u7ECF\u8D85\u8FC76000\u5B57\u5566\uFF01",5e3);report(m)}else d.setOutLoginMiddle(!0),d.getOutLogin().show()}),addEvent(b.cancel,"click",function(){window.close()}),placeholder([b.cont])},mid=getParam("mid"),wrap=byId("SI_Wrap"),dom=builder(wrap,"bbs-node-type").ids;getMsg(mid,dom),bind(mid,dom)}(window);